# Глава 1. Запуск Vim

В этой главе вы узнаете о различных способах запуска Vim из терминала. При написании этого руководства я использовал Vim 8.2. Если вы используете Neovim или более старую версию Vim, у вас все должно быть в порядке, но имейте в виду, что некоторые команды могут быть недоступны.

## Установка

Я не буду углубляться в подробную инструкцию по установке Vim на конкретную машину. Хорошая новость заключается в том, что большинство компьютеров на базе Unix должны поставляться с установленным Vim. Если нет, то большинство дистрибутивов должны иметь инструкции по установке Vim.

Чтобы загрузить дополнительную информацию о процессе установки Vim, посетите официальный сайт Vim или официальный репозиторий Vim на github:

- [Vim website](https://www.vim.org/download.php)
- [Vim github](https://github.com/vim/vim)

## Команда Vim 

Теперь, когда у вас установлен Vim, запустите его из терминала:

```bash
vim
```

Вы должны увидеть вступительный экран. Здесь вы будете работать над новым файлом. В отличие от большинства текстовых редакторов и IDE, Vim является модальным редактором. Если вы хотите набрать "hello", вам нужно переключиться в режим вставки с помощью `i`. Нажмите `ihello<Esc>`, чтобы вставить текст "hello".

## Выход из Vim

Есть несколько способов выйти из Vim. Самый распространенный из них — набрать:

```
:quit
```

Вы можете ввести `:q` для краткости. Эта команда является командой режима командной строки (еще один из режимов Vim). Если вы наберете `:` в обычном режиме, курсор переместится в нижнюю часть экрана, где вы сможете ввести какие-нибудь команды. Вы узнаете о режиме командной строки позже в главе 15. Если вы находитесь в режиме вставки, то при вводе `:` на экране буквально появится символ ":". В этом случае нужно переключиться обратно в обычный режим. Введите `<Esc>`, чтобы переключиться в обычный режим. Кстати, вы также можете вернуться в обычный режим из режима командной строки, нажав `<Esc>`. Вы заметите, что вы можете "сбежать" из нескольких режимов Vim обратно в нормальный режим, нажав `<Esc>`.

## Сохранение файла

Чтобы сохранить изменения, введите:

```
:write
```

Вы также можете ввести `:w` для краткости. Если это новый файл, вам нужно дать ему имя, прежде чем вы сможете его сохранить. Назовем его `file.txt`. Введите:

```
:w file.txt
```

Чтобы сохранить и выйти, вы можете комбинировать команды `:w` и `:q`:

```
:wq
```

Чтобы выйти без сохранения изменений, добавьте `!` после `:q`, чтобы принудительно выйти:

```
:q!
```

Есть и другие способы выхода из Vim, но именно эти вы будете использовать ежедневно.

## Справка 

В этом руководстве я буду отсылать вас к различным страницам справки Vim. Вы можете перейти на страницу справки, набрав `:help {some-command}` (сокращенно `:h`). Вы можете передать команде `:h` тему или имя команды в качестве аргумента. Например, чтобы узнать о различных способах выхода из Vim, введите:

```
:h write-quit
```

Как я узнал, что нужно искать "write-quit"? На самом деле никак. Я просто набрал `:h`, затем "quit", затем `<Tab>`. Vim отображает релевантные ключевые слова для выбора. Если вам когда-нибудь понадобится что-то найти ("Я хочу, чтобы Vim мог сделать это..."), просто введите `:h` и попробуйте несколько ключевых слов, а затем `<Tab>`.

## Открытие файла

Чтобы открыть файл (`hello1.txt`) в Vim из терминала, выполните:

```bash
vim hello1.txt
```

Вы также можете открыть несколько файлов одновременно:

```bash
vim hello1.txt hello2.txt hello3.txt
```

Vim открывает `hello1.txt`, `hello2.txt` и `hello3.txt` в отдельных буферах. О буферах вы узнаете в следующей главе.

## Аргументы

Вы можете передать в команду `vim` различные флагами и опции.

Чтобы проверить текущую версию Vim, выполните:

```bash
vim --version
```

Это покажет вам текущую версию Vim и все доступные функции, отмеченные знаком `+` или `-`. Для использования некоторых функций в этом руководстве требуется наличие этих функций. Например, в следующей главе вы изучите историю командной строки Vim, используя команду `:history`. Ваш Vim должен иметь функцию `+cmdline_history`, чтобы команда работала. Есть большая вероятность, что Vim, который вы только что установили, имеет все необходимые функции, особенно если он взят из популярного источника загрузки.

Многое из того, что вы делаете из терминала, можно сделать и из Vim. Чтобы увидеть версию *изнутри* Vim, вы можете выполнить следующее:

```
:version
```

Если вы хотите открыть файл `hello.txt` и сразу же выполнить команду Vim, вы можете передать команде `vim` опцию `+{cmd}`.

В Vim вы можете заменять строки с помощью команды `:s` (сокращение от `:substitute`). Если вы хотите открыть `hello.txt` и заменить все "pancake" на "bagel", выполните:

```bash
vim +%s/pancake/bagel/g hello.txt
```

Эти команды Vim могут быть объединены в стек(переданы друг за другом):

```bash
vim +%s/pancake/bagel/g +%s/bagel/egg/g +%s/egg/donut/g hello.txt
```

Vim заменит все экземпляры "pancake" на "bagel", затем заменит "bagel" на "egg", затем заменит "egg" на "donut" (вы узнаете о замене в следующей главе).

Вы также можете передать опцию `-c`, за которой следует команда Vim вместо синтаксиса `+`:

```bash
vim -c %s/pancake/bagel/g hello.txt
vim -c %s/pancake/bagel/g -c %s/bagel/egg/g -c %s/egg/donut/g hello.txt
```

## Открытие нескольких окон

Вы можете запускать Vim в разделенных горизонтальных и вертикальных окнах с опциями `-o` и `-O` соответственно.

Чтобы открыть Vim с двумя горизонтальными окнами, выполните:

```bash
vim -o2
```

Чтобы открыть Vim с пятью горизонтальными окнами, выполните:

```bash
vim -o5
```

Чтобы открыть Vim с пятью горизонтальными окнами и заполнить первые два `hello1.txt` и `hello2.txt`, выполните:

```bash
vim -o5 hello1.txt hello2.txt
```

Чтобы открыть Vim с двумя вертикальными окнами, пятью вертикальными окнами и пятью вертикальными окнами с двумя файлами, выполните:

```bash
vim -O2
vim -O5
vim -O5 hello1.txt hello2.txt
```

## Приостановка

Если вам нужно приостановить Vim во время редактирования, вы можете нажать `Ctrl-z`. Вы также можете выполнить команду `:stop` или `:suspend`. Чтобы вернуться к приостановленному Vim, запустите `fg` из терминала.

## Запуск Vim с умом

Команда `vim` может принимать множество различных опций, как и любая другая команда терминала. Две опции позволяют передать команду Vim в качестве параметра: `+{cmd}` и `-c cmd`. По мере того, как вы будете изучать больше команд в этом руководстве, посмотрите, сможете ли вы применить их при запуске Vim. Кроме того, будучи командой терминала, вы можете комбинировать `vim` со многими другими командами терминала. Например, вы можете перенаправить вывод команды `ls` для редактирования в Vim с помощью `ls -l | vim -`.

Чтобы узнать больше о команде `vim`, ознакомьтесь с `man vim`. Чтобы узнать больше о редакторе Vim, продолжайте читать это руководство вместе с командой `:help`.
